# Local development compose â€” connects to production Supabase.
# No local PostgreSQL or Adminer needed.
#
# Usage:
#   cp .env.local.template .env.local   # fill in prod values
#   docker compose -f docker-compose.local.yml up --build

services:
  app:
    build: .
    container_name: sage-mcp-app
    ports:
      - "8000:8000"
    env_file: .env.local
    volumes:
      - ./src:/app/src
      - ./pyproject.toml:/app/pyproject.toml
    command: ["uvicorn", "sage_mcp.main:app", "--host", "0.0.0.0", "--port", "8000", "--reload"]
    restart: unless-stopped

  frontend:
    build: ./frontend
    container_name: sage-mcp-frontend
    ports:
      - "3001:80"
    depends_on: [app]
    environment:
      - REACT_APP_API_URL=http://localhost:8000
    restart: unless-stopped
